<!--
    The app's view. The presentation framework fills this with content.

    Uses the Angular.JS presentation framework, together with the jQuery and jQuery-UI libraries.

    Created by Tyler Young on 4 April 2013.
-->
<!doctype html>
<html ng-app="ArgumentMapper"><!-- the ng-app tag says to treat the whole HTML doc as our Angular.JS app -->
<head>
    <!-- Twitter Bootstrap stylesheet, "Slate" theme
        More info: http://bootswatch.com/slate/ -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery, for Javascript++ -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

    <!-- The jQuery UI library, because mature UI frameworks
         beat the hell out of building this stuff from scratch -->
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

    <!-- Bootstrap Javascript, for more UI stuff -->
    <script src="js/bootstrap.min.js"></script>

    <!-- include the Angular.js presentation framework -->
    <script src="lib/angular.min.js"></script>

    <!-- The Presenter's interface to the model -->
    <script src="js/ArgumentData.js"></script>

    <!-- Our controller (presenter) for handling the premises -->
    <script type="text/javascript" src="js/canvasController.js"></script>

    <!-- The JS to make dragging-and-dropping premise boxes happen -->
    <script type="text/javascript" src="js/setUpUI.js"></script>

    <script src="js/autoresize.jquery.js"></script>

    <!-- Misc. styling, just playing with the premise boxes -->
    <style>
        body {
            padding-bottom: 5em;
            padding-top: 40px;
        }
        h3, h4 {
            text-shadow: none;
        }
        .navbar-fixed-top .container {
            width: 95%;
        }
        .navbar-inverse .brand.active {
            color: #ddd;
        }
        .dropdown-menu {
            margin: -2px 0 0;
        }
        #sidebar {
            padding: 1em 0 1em 1em;
        }
        .nav-list, .nav>li>a {
            background-color: transparent;
            box-shadow: none;
            padding-right: 0;
        }
        #theCanvas {
            position: relative;
            background: url("img/fabricBackground.png") repeat;
            border: 1px solid #333;
            border-radius: 0 0 4px 4px;
            height: 600px;
            padding: 1em;
            color: #222;
        }
        #theCanvas > * { /* First children of the canvas container */
            position: absolute;
        }
        #drawing {
            width: 100%;
            height: 600px;
            position: relative;
        }
        .premise, .premise-demo, .rebuttal, .rebuttal-demo {
            background-color: #fff;
            border: 1px solid #333;
            background-image: linear-gradient(to bottom,#fff,#d9d9d9);
            border-radius: 4px;
            width: 15em;
            padding: 1em;
            margin: 0.5em;
            position:  absolute;
            left: 0;
            top: 0; /* set these so Chrome doesn't return 'auto' from getComputedStyle */
            box-shadow: 0 0 7px #666;
            cursor: move;
        }
        textarea.premise-title, #argumentTitle {
            border: none;
            background: transparent;
            box-shadow: none;
            color: #222;
            padding: 0;
            font-weight: bold;
            white-space: normal;
            width: 90%;
            max-width: 100%;
            resize: none !important;
            -webkit-transition: border linear .2s, box-shadow linear .2s;
            -moz-transition: border linear .2s, box-shadow linear .2s;
            -o-transition: border linear .2s, box-shadow linear .2s;
            transition: border linear .2s, box-shadow linear .2s;
        }

        #argumentTitle {
            font-size: 2em;
            top: 15px;
            display: inline;
        }

        textarea.premise-title:focus, #argumentTitle:focus {
            background-color: #fff;
            border-color: rgba(82, 168, 236, 0.9);
            outline: 0;
            outline: thin dotted 9;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 1.0);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 1.0);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 1.0);
            font-weight: normal;
            padding: 0 3%;
            width: 85%;
            resize: auto;
        }

        #argumentTitle:focus {
            padding: 3px 8px;
            border-radius: 3px;
        }

        .premise-demo, .rebuttal-demo {
            display: block;
            position: inherit;
            padding: 0.5em;
            color: #333;
            margin: 0;
            text-shadow: none;
            width: inherit;
            cursor: pointer;
            box-shadow: none;
        }

        .premise-demo:hover {
            color: #666;
        }

        .rebuttal, .rebuttal-demo {
            background-color: #da4f49;
            background-image: linear-gradient(to bottom, #ee5f5b, #bd362f);
            color: #222;
        }

        .rebuttal-demo:hover {
            color: #333;
        }
        .close:hover {
            color: #bd362f;
            opacity: 1.0;
        }

        .connector-container {
            overflow: visible;
            top: 0;
            left: 0;
        }

        .connector {
            height: 10px;
            width: 30px;
            border-radius: 2px;
            background-color: #5bb75b;
            background-image: -moz-linear-gradient(top,#62c462,#51a351);
            background-image: -webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#51a351));
            background-image: -webkit-linear-gradient(top,#62c462,#51a351);
            background-image: -o-linear-gradient(top,#62c462,#51a351);
            background-image: linear-gradient(to bottom,#62c462,#51a351);
            background-repeat: repeat-x;
            border: 1px solid rgba(0, 0, 0, 0.3);
            position: absolute;
            z-index: 100;
        }
        .connector-end {

        }
        .connector-start {
            width:50px;
        }
        .connector-vertical {
            width: 10px;
            height: 30px;
        }
        .connector-vertical.connector-start {
            height: 50px;
        }
        .connect-point {
            width: 0;
            height: 0;
            /*visibility: hidden;*/
            position: absolute;
            background-color: red;
        }
        .connect-point-top {
            top: 0;
            right: 50%;
        }
        .connect-point-right {
            right: 0;
            top: 50%;
        }
        .connect-point-bottom {
            bottom: 0;
            right: 50%;
        }
        .connect-point-left {
            left: 0;
            top: 50%;
        }
    </style>
</head>

<body id="top" data-spy="scroll">
    <!-- The nav bar at the top of the screen. This is stock Bootstrap. -->
    <!-- @TODO: make this programmatic from the Presenter. -->
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand active" href="index.html">Argument Mapper</a>
                <div class="nav-collapse collapse" id="main-menu">
                    <ul class="nav" id="main-menu-left">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">File <b class="caret"></b></a>
                            <ul class="dropdown-menu" id="swatch-menu">
                                <li><a href="#">New</a></li>
                                <li><a href="#">Save</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Share</a></li>
                                <li><a href="#">Print</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Lorem</a></li>
                        <li><a href="#">Ipsum</a></li>
                        <li class="dropdown" id="preview-menu">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dolar <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Sit amet</a></li>
                                <li><a href="#">Concatenur</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Meta</a></li>
                                <li><a href="#">Gargoyle</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav pull-right" id="main-menu-right">
                        <li><a rel="tooltip" target="_blank" href="https://github.com/CS370/ArgumentMapper/" title="View on GitHub">View on GitHub <i class="icon-share-alt"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Primary content of page -->
    <div class="row-fluid">
        <!-- The sidebar -->
        <!-- TODO: Link these buttons up to the canvas -->
        <aside id="sidebar" class="span2">
            <ul class="nav nav-list">
                <li class="nav-header">Add an element</li>
                <li><a href="#" id="addNewPremise"><span class="premise-demo">Add a premise box</span></a></li>
                <li><a href="#" id="addNewRebuttal"><span class="rebuttal-demo">Add a rebuttal box</span></a></li>
                <li><a href="#" id="addNewConnector">Add a connector</a></li>
                <li class="nav-header">Do something else</li>
                <li><a href="#">Make a sandwich</a></li>
                <li><a href="#">Take a shower</a></li>
            </ul>
        </aside>

        <!-- Invoke the canvas controller (really more of a presenter), defined in js/canvasController.js.
            It adds a few things to its $scope variable:
                - a title
                - a list of premises, each of which contain
                    - a name
                    - a snippet describing them
                    - a top edge location (in pixels)
                    - a left edge location (in pixels)
            -->
        <div ng-controller="CanvasPresenter" id="theCanvas" class="span10">
            <canvas id="drawing" width="578" height="200"></canvas>
            <input value="{{title}}" id="argumentTitle"/>
            <!-- Note: premise element defined by a Directive in canvasController.js -->
            <premise ng-repeat="premise in premises" model="premise">
				<button class="close">&times;</button>
                <textarea type="text" placeholder="Type your premise here" class="premise-title" rows="1">{{premise.title}}</textarea>
                <p>Contents: {{premise.content}}</p>
                <p>top: {{premise.top}}; left: {{premise.left}}</p>
            </premise>
            <connector ng-repeat="connector in connectors" model="connector">
                <div id="{{connector.id}}-start" class="connector connector-start"></div>
                <div id="{{connector.id}}-end" class="connector connector-end"></div>
            </connector>
        </div>

    </div>

    <div class="container">
        <h2>Miscellaneous Angular.JS examples</h2>

        <!-- Data binding! The binding tells Angular that it should evaluate this expression and insert
        the result into the DOM in place of the binding.

        (In this case, it concatenates the string "Javascript" to the strings of a single space and
        "style!".)

        Rather than a one-time insert, as you'll see in the following code, a binding will
        result in efficient, continuous updates whenever the result of the
        expression evaluation changes. -->
        <p>This is {{'Javascript' + ' ' + 'style!'}}</p>

        <!-- One more example of Javascript expression evaluation -->
        <p>1 + 2 = {{ 1 + 2 }}</p>

        <!-- Data binding, mo betta.
        The ng-model="yourName" bit tells Angular that the text in this field
        will be the model (in the MVC/MVP sense of the word) for this scope's
        variable called yourName.

        Thus, when you type in the box, you change the yourName variable and
        instantly update all copies of that variable---the "Hello {{yourName}}"
        bit updates instantly!
        -->
        <label>Name:</label>
        <input type="text" ng-model="yourName" placeholder="Enter a name here">
        <hr>
        <h1>Hello {{yourName}}!!!!</h1>

    </div>
</body>


</html>
